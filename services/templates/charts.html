<html>
    <head></head>
    <body>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

        <script>
            var randomColorGenerator = function () {
                return '#' + (Math.random().toString(16) + '0000000').slice(2, 8);
            };
            
            var top_tariffs_config = {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: {{ top_tariffs.connections|safe }},
                        backgroundColor: [{% for label in top_tariffs.labels %}randomColorGenerator(),{% endfor %}],
                    }],
                    labels: {{ top_tariffs.labels|safe }}
                },
                options: {
                    responsive: true
                }
            };

            var top_fillials_config = {
                type: 'doughnut',
                data: {
                    labels: {{ top_filials.labels|safe }},
                    datasets: [{
                        data: {{ top_filials.connections|safe }},
                        backgroundColor: [{% for label in top_filials.labels %}randomColorGenerator(),{% endfor %}],
                    }],
                },
                options: {
                    responsive: true
                }
            }
            
            var connections_by_dates_config = {
                type: 'line',
                data: {
                    labels: {{ connections_by_date.labels|safe }},
                    datasets: [{
                        label: 'Подключения',
                        data: {{ connections_by_date.connections|safe }},
                        borderColor: randomColorGenerator(),
                        fill: false,
                    }]
                },
                options: {
                    responsive: true,
                }
            }
            window.onload = function() {
                var ctx = document.getElementById('top-tariffs-chart').getContext('2d');
                window.myPie = new Chart(ctx, top_tariffs_config);

                var ctx = document.getElementById('top-filials-chart').getContext('2d');
                window.myPie = new Chart(ctx, top_fillials_config);

                var ctx = document.getElementById('connection-by-dates-chart').getContext('2d');
                window.myPie = new Chart(ctx, connections_by_dates_config);
            };

        </script>

    <h1 class="text-center">Тариф</h1>
    <hr>
    <div class="row justify-content-center">
        <div class="col-sm-4">
            <p class="text-center"><b>Тарифы по популярности</b></p>
            <canvas id="top-tariffs-chart" style="width: 100px !important;"></canvas>
        </div>
        <div class="col-sm-4">
            <p class="text-center"><b>Филиалы по продажам</b></p>
            <canvas id="top-filials-chart" style="width: 100px !important;"></canvas>
        </div>
    </div>
    <br></br>
    <div class="row justify-content-center">
        <div class="col-sm-6">
            <p class="text-center"><b>Подлючения по датам</b></p>
            <canvas id="connection-by-dates-chart" style="width: 100px !important;"></canvas>
        </div>
    </div>
    </body>
</html>